# 应用基础信息（项目名称、环境、调试开关、基础 URL）
# Application basics (project identity, runtime environment, debug mode, base URL)
APP_NAME="Obsidian Admin Laravel API"
APP_ENV=local
APP_KEY=
APP_DEBUG=true
APP_URL=http://localhost

# 反向代理信任配置（影响真实 IP、限流、审计日志、会话设备 IP）
# Trusted proxy settings (affects real client IP, rate limit, audit logs, session IP display)
TRUSTED_PROXIES=REMOTE_ADDR
# TRUSTED_PROXIES=*
TRUSTED_PROXY_HEADERS=DEFAULT
# TRUSTED_PROXY_HEADERS=AWS_ELB
# TRUSTED_PROXY_HEADERS=FORWARDED
# TRUSTED_PROXY_HEADERS=HEADER_X_FORWARDED_FOR,HEADER_X_FORWARDED_PROTO,HEADER_X_FORWARDED_HOST,HEADER_X_FORWARDED_PORT

# 应用默认语言与回退语言（APP_DEFAULT_LOCALE 对前端默认语言代码也有影响）
# Application locale defaults and fallback (APP_DEFAULT_LOCALE also affects frontend default locale code)
APP_LOCALE=en
APP_FALLBACK_LOCALE=en
APP_DEFAULT_LOCALE=en-US
APP_FAKER_LOCALE=en_US

# 维护模式配置（生产可切换为 database 以便多实例共享状态）
# Maintenance mode settings (production may use database store for multi-instance consistency)
APP_MAINTENANCE_DRIVER=file
# APP_MAINTENANCE_STORE=database

# 内置 PHP 开发服务器 worker 数量（仅本地临时调试）
# PHP built-in server worker count (local temporary debugging only)
# PHP_CLI_SERVER_WORKERS=4

# 密码哈希成本（越高越安全但 CPU 开销越大）
# Password hashing cost (higher is stronger but costs more CPU)
BCRYPT_ROUNDS=12

# 日志输出配置（可切到 json 方便 ELK / Loki / Datadog）
# Logging configuration (switch to json for ELK / Loki / Datadog ingestion)
LOG_CHANNEL=stack
# LOG_CHANNEL=json
LOG_STACK=single
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=debug

# 数据库连接（默认 sqlite；MySQL 示例保留为注释）
# Database connection (sqlite by default; MySQL sample kept as comments)
DB_CONNECTION=sqlite
# DB_HOST=mysql
# DB_PORT=3306
# DB_DATABASE=obsidian
# DB_USERNAME=obsidian
# DB_PASSWORD=obsidian
ELOQUENT_STRICT_MODE=true

# Session 配置（本项目主要用 API Token，但后台会话相关能力仍可用）
# Session settings (API token is primary, but Laravel session features may still be used)
SESSION_DRIVER=database
SESSION_LIFETIME=120
SESSION_ENCRYPT=false
SESSION_PATH=/
SESSION_DOMAIN=null

# Laravel 核心驱动（广播、文件、队列）
# Core Laravel drivers (broadcasting, filesystem, queue)
BROADCAST_CONNECTION=log
FILESYSTEM_DISK=local
QUEUE_CONNECTION=database

# Laravel Reverb / WebSocket 配置（如未启用可保持默认）
# Laravel Reverb / WebSocket settings (safe to keep defaults if unused)
REVERB_APP_ID=obsidian-local
REVERB_APP_KEY=obsidian-reverb-key
REVERB_APP_SECRET=obsidian-reverb-secret
REVERB_HOST=localhost
REVERB_PORT=8080
REVERB_SCHEME=http

# 缓存与功能开关存储（生产建议 redis）
# Cache and feature-flag stores (redis recommended for production)
CACHE_STORE=database
# CACHE_PREFIX=
PENNANT_STORE=database

# Horizon 队列面板配置（使用 Redis 队列时更合适）
# Horizon dashboard settings (best paired with Redis queues)
HORIZON_NAME="Obsidian Horizon"
HORIZON_DOMAIN=
HORIZON_PATH=horizon
HORIZON_PREFIX=obsidian_horizon:
HORIZON_ALLOWED_EMAILS=
HORIZON_QUEUE_CONNECTION=redis

# Laravel Pulse 监控配置（大流量场景建议 Redis ingest）
# Laravel Pulse monitoring settings (Redis ingest is recommended for higher traffic)
PULSE_ENABLED=true
PULSE_DOMAIN=
PULSE_PATH=ops/pulse
PULSE_STORAGE_DRIVER=database
PULSE_INGEST_DRIVER=redis
PULSE_REDIS_CONNECTION=default

# OpenTelemetry 追踪响应头配置（traceparent 可用于前后端链路排查）
# OpenTelemetry tracing response headers (traceparent helps frontend/backend tracing)
OTEL_TRACE_ENABLED=true
OTEL_RESPONSE_TRACEPARENT=true

# 生产环境建议（不是强制值，按项目规模与基础设施调整）
# Production recommendations (not mandatory, tune based on project size/infrastructure)
# APP_ENV=production
# APP_DEBUG=false
# CACHE_STORE=redis
# QUEUE_CONNECTION=redis
# AUDIT_QUEUE_CONNECTION=redis

# Memcached 配置（仅在使用 memcached 驱动时需要）
# Memcached settings (only needed when using memcached driver)
MEMCACHED_HOST=127.0.0.1

# Redis 配置（缓存、队列、审计队列、Pulse/Horizon 常用）
# Redis settings (used by cache, queues, audit queue, Pulse/Horizon)
REDIS_CLIENT=phpredis
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379

# 邮件配置（默认 log；生产改 SMTP / SES / Mailgun 等）
# Mail settings (defaults to log; switch to SMTP / SES / Mailgun in production)
MAIL_MAILER=log
MAIL_SCHEME=null
MAIL_HOST=127.0.0.1
MAIL_PORT=2525
MAIL_USERNAME=null
MAIL_PASSWORD=null
MAIL_FROM_ADDRESS="hello@example.com"
MAIL_FROM_NAME="${APP_NAME}"

# 对象存储 / S3 配置（上传文件或导出文件时使用）
# Object storage / S3 settings (used for uploads or exported files)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=
AWS_USE_PATH_STYLE_ENDPOINT=false

# 提供给前端构建的共享变量（Vite）
# Shared variables for frontend build (Vite)
VITE_APP_NAME="${APP_NAME}"

# API 运行时配置（Token TTL、文档、限流、缓存）
# API runtime settings (token TTLs, docs, throttling, cache)
API_ACCESS_TOKEN_TTL_MINUTES=120
API_REFRESH_TOKEN_TTL_DAYS=7
API_REMEMBER_ACCESS_TOKEN_TTL_MINUTES=240
API_REMEMBER_REFRESH_TOKEN_TTL_DAYS=30
API_CURRENT_VERSION=v1
API_LEGACY_UNVERSIONED_ENABLED=true
API_DOCS_ENABLED=true
API_DOCS_CACHE_ENABLED=true
API_DOCS_CACHE_TTL_SECONDS=600
API_THROTTLE_LIMIT=60
AUTH_THROTTLE_LIMIT=5
API_AUTH_MENU_CACHE_TTL_SECONDS=300
API_USER_PROFILE_CACHE_TTL_SECONDS=180

# 认证与密码策略（登录限流、密码复杂度、邮箱验证、2FA、TOTP 时间窗口）
# Auth and password policy (login throttling, password rules, email verification, 2FA, TOTP window)
AUTH_LOGIN_MAX_ATTEMPTS=5
AUTH_LOGIN_DECAY_SECONDS=60
AUTH_PASSWORD_MIN=8
AUTH_PASSWORD_REQUIRE_MIXED_CASE=true
AUTH_PASSWORD_REQUIRE_SYMBOLS=false
AUTH_PASSWORD_CHECK_UNCOMPROMISED=false
AUTH_REQUIRE_EMAIL_VERIFICATION=false
AUTH_SUPER_ADMIN_REQUIRE_2FA=false
AUTH_TOTP_WINDOW=1

# 安全基线策略开关（用于 CI / baseline 命令，不直接改变业务功能）
# Security baseline policy toggles (for CI / baseline command, does not directly change runtime behavior)
SECURITY_BASELINE_REQUIRE_SUPER_ADMIN_2FA=false

# TOTP 防重放与会话策略（默认启用防重放；单设备登录按项目选择）
# TOTP replay protection and session policy (replay protection on by default; single-device login is project-specific)
AUTH_TOTP_REPLAY_PROTECTION=true
AUTH_TOTP_REPLAY_CACHE_PREFIX=auth:totp:used
AUTH_TOTP_REPLAY_TTL_SECONDS=0
AUTH_SINGLE_DEVICE_LOGIN=true

# 审计日志队列配置（建议生产开启异步写入）
# Audit log queue settings (async write is recommended in production)
AUDIT_QUEUE_ENABLED=true
AUDIT_QUEUE_CONNECTION=database
AUDIT_QUEUE_NAME=audit
AUDIT_QUEUE_TRIES=5
AUDIT_QUEUE_BACKOFF=5,30,120
AUDIT_QUEUE_TIMEOUT=15

# API 稳定性与观测配置（HTTP 日志、幂等、乐观锁、健康检查）
# API stability and observability settings (HTTP logs, idempotency, optimistic lock, health endpoints)
LOG_HTTP_REQUESTS=true
IDEMPOTENCY_TTL_HOURS=24
IDEMPOTENCY_LOCK_TIMEOUT_SECONDS=30
IDEMPOTENCY_METHODS=POST,PUT,PATCH
OPTIMISTIC_LOCK_REQUIRE_TOKEN=false
HEALTH_EXPOSE_CHECKS=true

# 侧边栏菜单元数据默认开关（控制菜单是否在后端元数据中出现）
# Sidebar menu metadata defaults (controls whether menus appear in backend metadata)
MENU_FEATURE_HOME=true
MENU_FEATURE_TENANT=true
MENU_FEATURE_IAM=true
MENU_FEATURE_ROLE=true
MENU_FEATURE_PERMISSION=true
MENU_FEATURE_LANGUAGE=true
MENU_FEATURE_AUDIT=true
MENU_FEATURE_AUDIT_POLICY=true
MENU_FEATURE_THEME=true

# Feature Flag 默认值与放量比例（用于菜单/功能灰度发布）
# Feature flag defaults and rollout percentages (used for gradual menu/feature rollout)
FF_MENU_HOME=true
FF_MENU_HOME_PERCENTAGE=100
FF_MENU_TENANT=true
FF_MENU_TENANT_PERCENTAGE=100
FF_MENU_IAM=true
FF_MENU_IAM_PERCENTAGE=100
FF_MENU_ROLE=true
FF_MENU_ROLE_PERCENTAGE=100
FF_MENU_PERMISSION=true
FF_MENU_PERMISSION_PERCENTAGE=100
FF_MENU_AUDIT=true
FF_MENU_AUDIT_PERCENTAGE=100
FF_MENU_AUDIT_POLICY=true
FF_MENU_AUDIT_POLICY_PERCENTAGE=100
FF_MENU_LANGUAGE=true
FF_MENU_LANGUAGE_PERCENTAGE=100
FF_MENU_THEME=true
FF_MENU_THEME_PERCENTAGE=100

# 安全基线阈值（用于 security:baseline 命令）
# Security baseline thresholds (used by security:baseline command)
SECURITY_BASELINE_MIN_LOGIN_ATTEMPTS=3
SECURITY_BASELINE_MIN_PASSWORD_LENGTH=8

# 项目配置模板（初始化/重置配置时使用）
# Project profile preset (used by profile apply / reset workflows)
PROJECT_PROFILE=base

# 平台主题默认值（登录页与后台主题配置的初始基线）
# Platform theme defaults (initial baseline for login page and admin theme config)
APP_THEME_SCHEME=light
APP_THEME_COLOR=#646cff
APP_THEME_RADIUS=6
APP_THEME_HEADER_HEIGHT=56
APP_THEME_SIDER_WIDTH=220
APP_THEME_SIDER_COLLAPSED_WIDTH=64
APP_THEME_LAYOUT_MODE=vertical
APP_THEME_SCROLL_MODE=content
APP_THEME_DARK_SIDER=false
APP_THEME_SCHEMA_VISIBLE=true
APP_THEME_HEADER_FULLSCREEN_VISIBLE=true
APP_THEME_TAB_VISIBLE=true
APP_THEME_TAB_FULLSCREEN_VISIBLE=true
APP_THEME_BREADCRUMB_VISIBLE=true
APP_THEME_FOOTER_VISIBLE=true
APP_THEME_FOOTER_HEIGHT=48
APP_THEME_MULTILINGUAL_VISIBLE=true
APP_THEME_GLOBAL_SEARCH_VISIBLE=true
APP_THEME_CONFIG_VISIBLE=true
APP_THEME_PAGE_ANIMATE=true
APP_THEME_PAGE_ANIMATE_MODE=fade-slide
APP_THEME_FIXED_HEADER_AND_TAB=true
